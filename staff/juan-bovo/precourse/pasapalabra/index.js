questionsTrunkOriginal = [
[
{ letter: "a", answer: "abducir", status: 0, question: "CON LA A. Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien"},
{ letter: "a", answer: "abierto", status: 0, question: "CON LA A. No murado, no cercado o no cerrado."},
{ letter: "a", answer: "ahorrar", status: 0, question: "CON LA A. Guardar dinero como previsión para necesidades futuras."},
{ letter: "a", answer: "arma", status: 0, question: "CON LA A. Instrumento o máquina que sirve para atacar o defenderse."},
],
[
{ letter: "b", answer: "bingo", status: 0, question: "CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso"},
{ letter: "b", answer: "broca", status: 0, question: "CON LA B. Herramienta formada por una barra metálica con la punta en espiral, para hacer agujeros en material duro."},
{ letter: "b", answer: "beca", status: 0, question: "CON LA B. Subvención para realizar estudios o investigaciones."},
{ letter: "b", answer: "bañarse", status: 0, question: "CON LA B. Entrar en el agua para lavarse, para nadar o jugar."},
],
[
{ letter: "c", answer: "churumbel", status: 0, question: "CON LA C. Niño, crío, bebé"},
{ letter: "c", answer: "chollo", status: 0, question: "CON LA C. Cosa apreciable que se adquiere a poca costa."},
{ letter: "c", answer: "culpar", status: 0, question: "CON LA C. Atribuir o echar la culpa a alguien."},
{ letter: "c", answer: "cazadora", status: 0, question: "CON LA C. Ropa de abrigo que cubre desde los hombros a la cintura."},
],
[
{ letter: "d", answer: "diarrea", status: 0, question: "CON LA D. Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida"},
{ letter: "d", answer: "dentadura", status: 0, question: "CON LA D. Conjunto de dientes, muelas y colmillos que tiene en la boca una persona o un animal."},
{ letter: "d", answer: "deportar", status: 0, question: "CON LA D. Desterrar a alguien de algún lugar, por lo regular extranjero, y confinarlo allí por razones políticas o como castigo."},
{ letter: "d", answer: "debil", status: 0, question: "CON LA D. Que tiene poca fuerza, poco vigor o poca resistencia."},
],
[
{ letter: "e", answer: "ectoplasma", status: 0, question: "CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación"},
{ letter: "e", answer: "estrenar", status: 0, question: "CON LA E. Hacer uso por primera vez de algo."},
{ letter: "e", answer: "envoltorio", status: 0, question: "CON LA E. Capa exterior que cubre natural o artificialmente una cosa."},
{ letter: "e", answer: "edificio", status: 0, question: "CON LA E. Lugar que se usa para viviendas, oficinas, colegios, etc."},
],
[
{ letter: "f", answer: "facil", status: 0, question: "CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad"},
{ letter: "f", answer: "fisioterapia", status: 0, question: "CON LA F. Tratamiento de las enfermedades o lesiones por medio de elementos mecánicos, como el masaje o la gimnasia."},
{ letter: "f", answer: "frenar", status: 0, question: "CON LA F. Moderar o parar el movimiento de algo."},
{ letter: "f", answer: "futuro", status: 0, question: "CON LA F. Tiempo que viene después."},
],
[
{ letter: "g", answer: "galaxia", status: 0, question: "CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas"},
{ letter: "g", answer: "golfo", status: 0, question: "CON LA G. Gran porción de mar que se interna en la tierra entre dos cabos."},
{ letter: "g", answer: "grupo", status: 0, question: "CON LA G. Pluralidad de seres o cosas que forman un conjunto."},
{ letter: "g", answer: "grua", status: 0, question: "CON LA G. Máquina para levantar objetos pesados y moverlos de un lugar a otro."},
],
[
{ letter: "h", answer: "harakiri", status: 0, question: "CON LA H. Suicidio ritual japonés por desentrañamiento"},
{ letter: "h", answer: "hidratar", status: 0, question: "CON LA H. Restablecer el grado de humedad normal de la piel u otros tejidos."},
{ letter: "h", answer: "huelga", status: 0, question: "CON LA H. Interrupción colectiva de la actividad laboral por parte de los trabajadores con el fin de reivindicar ciertas condiciones o manifestar una protesta."},
{ letter: "h", answer: "hundirse", status: 0, question: "CON LA H. Irse abajo dentro del agua."},
],
[
{ letter: "i", answer: "iglesia", status: 0, question: "CON LA I. Templo cristiano"},
{ letter: "i", answer: "irlanda", status: 0, question: "CON LA I. País europeo con capital en Dublín."},
{ letter: "i", answer: "indignar", status: 0, question: "CON LA I. Irritar, enfadar vehementemente a alguien."},
{ letter: "i", answer: "isla", status: 0, question: "CON LA I. Territorio que está rodeado de agua por todas partes."},
],
[
{ letter: "j", answer: "jabali", status: 0, question: "CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba"},
{ letter: "j", answer: "jamiroquai", status: 0, question: "CON LA J. Grupo musical de funk que en 1996 publicó el álbum Travelling without Moving."},
{ letter: "j", answer: "jubilado", status: 0, question: "CON LA J. Persona que ha dejado de trabajar y percibe una pensión."},
{ letter: "j", answer: "jugador", status: 0, question: "CON LA J. Persona que juega."},
],
[
{ letter: "k", answer: "kamikaze", status: 0, question: "CON LA K. Persona que se juega la vida realizando una acción temeraria"},
{ letter: "k", answer: "kiosco", status: 0, question: "CON LA K. Construcción pequeña y por lo general portátil que, instalada en la vía pública, ofrece revistas u otros bienes."},
{ letter: "k", answer: "koala", status: 0, question: "CON LA K. Mamífero marsupial arborícola parecido a un oso pequeño, propio de los eucaliptales australianos."},
{ letter: "k", answer: "kilo", status: 0, question: "CON LA K. Medida para pesar equivalente a mil gramos."},
],
[
{ letter: "l", answer: "licantropo", status: 0, question: "CON LA L. Hombre lobo"},
{ letter: "l", answer: "levante", status: 0, question: "CON LA L. Viento procedente del este."},
{ letter: "l", answer: "liberar", status: 0, question: "CON LA L. Hacer que alguien o algo quede libre, eximir a alguien de una obligación."},
{ letter: "l", answer: "lata", status: 0, question: "CON LA L. Envase de metal."},
],
[
{ letter: "m", answer: "mate", status: 0, question: "CON LA M. Infusión de origen guaraní, muy popular en Sudamérica."},
{ letter: "m", answer: "misantropo", status: 0, question: "CON LA M. Persona que, por su humor tétrico, manifiesta aversión al trato humano."},
{ letter: "m", answer: "manifestacion", status: 0, question: "CON LA M. Reunión pública, generalmente al aire libre, en la que los asistentes reclaman algo o expresan su protesta por algo."},
{ letter: "m", answer: "manzana", status: 0, question: "CON LA M. Fruta de piel fina, amarilla, verde o roja, de carne blanca y dura."},
],
[
{ letter: "n", answer: "necedad", status: 0, question: "CON LA N. Demostración de poca inteligencia"},
{ letter: "n", answer: "noruego", status: 0, question: "CON LA N. Natural del país europeo con capital en Oslo."},
{ letter: "n", answer: "nacionalidad", status: 0, question: "CON LA N. Estado propio de la persona nacida o naturalizada en una nación."},
{ letter: "n", answer: "nunca", status: 0, question: "CON LA N. Ningún día o en ningún tiempo."},
],
[
{ letter: "ñ", answer: "señal", status: 0, question: "CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo."},
{ letter: "ñ", answer: "leña", status: 0, question: "CONTIENE LA Ñ. Parte de los árboles y matas que, cortada y hecha trozos, se emplea como combustible."},
{ letter: "ñ", answer: "soñar", status: 0, question: "CONTIENE LA Ñ. Representarse en la fantasía imágenes o sucesos mientras se duerme."},
{ letter: "ñ", answer: "ñandu", status: 0, question: "CON LA Ñ. Ave sudamericana de gran tamaño, parecida al avestruz."},
],
[
{ letter: "o", answer: "orco", status: 0, question: "CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien"},
{ letter: "o", answer: "obsoleto", status: 0, question: "CON LA O. Anticuado, inadecuado a las circunstancias actuales."},
{ letter: "o", answer: "organización", status: 0, question: "CON LA O. Asociación de personas regulada por un conjunto de normas en función de determinados fines."},
{ letter: "o", answer: "oveja", status: 0, question: "CON LA O. Animal doméstico que tiene el cuerpo cubierto de lana."},
],
[
{ letter: "p", answer: "protoss", status: 0, question: "CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft"},
{ letter: "p", answer: "parvulo", status: 0, question: "CON LA P. Se dice de un niño de muy corta edad."},
{ letter: "p", answer: "promover", status: 0, question: "CON LA P. Iniciar o impulsar una idea o proyecto procurando su logro."},
{ letter: "p", answer: "pasear", status: 0, question: "CON LA P. Andar por placer o para hacer ejercicio."},
],
[
{ letter: "q", answer: "queso", status: 0, question: "CON LA Q. Producto obtenido por la maduración de la cuajada de la leche"},
{ letter: "q", answer: "bosque", status: 0, question: "CONTIENE LA Q. Sitio poblado de árboles y matas."},
{ letter: "q", answer: "delinquir", status: 0, question: "CONTIENE LA Q. Cometer delito."},
{ letter: "q", answer: "queso", status: 0, question: "CON LA Q. Alimento sólido preparado con leche."},
],
[
{ letter: "r", answer: "raton", status: 0, question: "CON LA R. Roedor"},
{ letter: "r", answer: "ring", status: 0, question: "CON LA R. Espacio cercado en que combaten los boxeadores."},
{ letter: "r", answer: "reciclar", status: 0, question: "CON LA R. Someter material usado a un proceso para que se pueda volver a utilizar."},
{ letter: "r", answer: "resumen", status: 0, question: "CON LA R. Pocas palabras que  cuentan una historia más larga."},
],
[
{ letter: "s", answer: "stackoverflow", status: 0, question: "CON LA S. Comunidad salvadora de todo desarrollador informático"},
{ letter: "s", answer: "silencio", status: 0, question: "CON LA S. Falta de ruido."},
{ letter: "s", answer: "suprimir", status: 0, question: "CON LA S. Hacer cesar, hacer desaparecer, anular."},
{ letter: "s", answer: "sandalia", status: 0, question: "CON LA S. Calzado que no tapa todo el pie."},
],
[
{ letter: "t", answer: "terminator", status: 0, question: "CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984"},
{ letter: "t", answer: "talco", status: 0, question: "CON LA T. Silicato de magnesia que, en forma de polvo, se utiliza para la higiene y en la industria cosmética."},
{ letter: "t", answer: "tasa", status: 0, question: "CON LA T. Tributo que se impone a la utilización de ciertos servicios, o al ejercicio de ciertas actividades."},
{ letter: "t", answer: "techo", status: 0, question: "CON LA T. Parte de una habitación que está arriba."},
],
[
{ letter: "u", answer: "unamuno", status: 0, question: "CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914"},
{ letter: "u", answer: "usurpar", status: 0, question: "CON LA U. Apoderarse de una propiedad o de un derecho que legítimamente pertenece a otro, por lo general con violencia."},
{ letter: "u", answer: "urgencia", status: 0, question: "CON LA U. Necesidad o falta apremiante, inmediata obligación de hacer algo."},
{ letter: "u", answer: "urgente", status: 0, question: "CON LA U. Asunto que no puede esperar."},
],
[
{ letter: "v", answer: "vikingos", status: 0, question: "CON LA V. Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa"},
{ letter: "v", answer: "vispera", status: 0, question: "CON LA V. Día que antecede inmediatamente a otro determinado, especialmente si es fiesta."},
{ letter: "v", answer: "vivienda", status: 0, question: "CON LA V. Lugar cerrado y cubierto construido para ser habitado por personas."},
{ letter: "v", answer: "veloz", status: 0, question: "CON LA V. Que es muy rápido."},
],
[
{ letter: "w", answer: "sandwich", status: 0, question: "CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso"},
{ letter: "w", answer: "whatsapp", status: 0, question: "CON LA W. App de mensajería instantánea, utilizada principalmente en móviles, que permite enviar mensajes gratuitamente."},
{ letter: "w", answer: "whisky", status: 0, question: "CON LA W. Licor alcóholico que se obtiene del destilado del grano de algunas plantas."},
{ letter: "w", answer: "darwin", status: 0, question: "CONTIENE LA W. (Charles ____) Naturalista inglés, autor de \"El origen de las especies\"."},
],
[
{ letter: "x", answer: "botox", status: 0, question: "CONTIENE LA X. Toxina bacteriana utilizada en cirujía estética"},
{ letter: "x", answer: "flexibilizar", status: 0, question: "CONTIENE LA X. Hacer flexible algo, darle flexibilidad."},
{ letter: "x", answer: "exaltar", status: 0, question: "CONTIENE LA X. Avivar o aumentar un sentimiento o pasión, realzar el mérito o las cualidades de alguien."},
{ letter: "x", answer: "xavier", status: 0, question: "CON LA X. (Charles ____) Mutante telépata, líder y fundador de los X-Men."},
],
[
{ letter: "y", answer: "peyote", status: 0, question: "CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos"},
{ letter: "y", answer: "guy", status: 0, question: "CONTIENE LA Y. (___ Ritchie): Nombre propio del realizador que dirigió la película Revolver en 2005."},
{ letter: "y", answer: "cayuco", status: 0, question: "CONTIENE LA Y. Embarcación india de una pieza, más pequeña que la canoa, con el fondo plano, que se gobierna con el canalete."},
{ letter: "y", answer: "yegua", status: 0, question: "CON LA Y. Hembra del caballo."},
],
[
{ letter: "z", answer: "zen", status: 0, question: "CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional"},
{ letter: "z", answer: "zanjaste", status: 0, question: "CON LA Z. Segunda persona de singular del pretérito perfecto simple de indicativo del verbo zanjar."},
{ letter: "z", answer: "zoologico", status: 0, question: "CON LA Z. Lugar en que se conservan, cuidan y crían diversas especies animales con fines didácticos o de entretenimiento."},
{ letter: "z", answer: "zarpar", status: 0, question: "CON LA Z. Empezar a navegar."},
],
];

var user = {name: 'anon', rigths: 0, wrongs: 0, ronda: 0};
var questions = []
var ranking = [];
var countRespuestas = 0;
var saliendo = false;

function welcome(){ //Setea el juego, da la bienvenida y muestra las reglas.
    user.name = '';
    user.name = prompt('¿Cuál es tu nombre?');
    user.rigths = 0;
    user.wrongs = 0;
    user.ronda = 0
    questions = []
    countRespuestas = 0;
    saliendo = false;
    var message1 = `¡Bienvenido, ${user.name}!\n
Te invito a jugar pasapalabra:
- Hay en total 27 preguntas, una por cada letra del abecedario.
- En cada ronda iremos letra por letra: primero la A, luego la B, después la C, etc.
- Te daré una definición por cada letra, y tú deberás escribir la respuesta.
- Presta atención: algunas respuestas COMIENZAN por la letra en la que estés, mientras otras CONTIENEN esa letra. Te lo aclararé en cada pregunta, no te preocupes.
- Si no conoces la respuesta, escribe "pasapalabra" y continúa con la siguiente letra.
- Si respondes mal, esa pregunta queda anulada...
- ... pero podrás responder las preguntas en las que hayas colocado "pasapalabra" en rondas sucesivas.`
    var message2 = `¡ATENCIÓN!\n
Algunas aclaraciones y detalles
- No distingo entre mayúsculas y minúsculas.
- Mis respuestas nunca llevan tilde... ¯\\_(ツ)_/¯
- Comienzas con 0 puntos, y acumularás 1 punto por cada respuesta correcta.
- Si respondes incorrectamente, sumarás un error y ya no podrás volver a responder por esa letra.
- A diferencia de la tele, aquí no hay tiempo límite para responder.
- (y tampoco te daré un premio en dinero... que lo sepas, ¿vale?)
- Puedes hacer tantas rondas como quieras.
- Para salir durante el juego, escribe "END" en lugar de la respuesta.
- ¡Mucha suerte, ${user.name}!`
    alert(message1)
    alert(message2)
    var continuar = confirm('¿Deseas comenzar a jugar?');
    switch(continuar){
        case true:
            battery();
            break;
        case false:
            salir();
            break;
    }
}

function battery(){ //--> Genera cuestionario random, en base a las preguntas que se hayan agregado en questionsTrunkOriginal.
    var questionsTrunk = JSON.parse(JSON.stringify(questionsTrunkOriginal)); //Clona questionsTrunkOriginal para evitar alterarlo.
    for (var i = 0; i < questionsTrunk.length; i++){
        var previo = [];
        var number = Math.floor(Math.random() * questionsTrunk[i].length)
        for (var j = 0; j < questionsTrunk[i].length; j++){
            previo.push(questionsTrunk[i][j])
        }
        questions.push(previo[number])
    }
    questionsTrunk = []
    pasapalabra()
}

function pasapalabra(){ //Solo chequea si se hicieron todas las preguntas en una partida.
    if (countRespuestas === 27){
        victory();
    } else {
        preguntas()
    }
}

function preguntas(){
    user.ronda++
    alert(`Ronda Nº${user.ronda}, ${user.name}... ¡mucha suerte!`)
    for (var i = 0; i < questions.length; i++){
        if (questions[i].status === 1 || questions[i].status === 'X'){
            continue;
        } else if (questions[i].status === 0){
            var userAnswer = prompt(`${questions[i].question}`).toLowerCase();
            if (userAnswer === 'pasapalabra'){
                continue;
            } else if (userAnswer === 'end'){
                saliendo = true;
                salir()
                break;
            } else {
                if (userAnswer === `${questions[i].answer}`){
                    questions[i].status = 1;
                    user.rigths++
                    countRespuestas++
                    alert('¡Correcto! ¡Sumas 1 punto!');
                } else if (userAnswer !== `${questions[i].answer}`){
                    questions[i].status = 'X';
                    user.wrongs++
                    countRespuestas++
                    alert('Incorrecto! Sumas un error... ¡siguiente letra!');
                }
            }
        }
    }
    if (saliendo === false){
        pasapalabra();
    }
}


function salir(){ //Función para que el user salga y no pase por el ranking. Permite empezar otra partida.
    continuar = confirm(`Lamento que te vayas, ${user.name}!\nHas acertado ${user.rigths} preguntas y has cometido ${user.wrongs} errores.\nPresiona OK para intentarlo nuevamente, o ESC para salir:`);
    switch(continuar){
        case true:
            welcome();
            break;
        case false:
            alert(`¡Adiós, ${user.name}!\n¡Vuelve cuando quieras volver a jugar PASAPALABRA!`);
            break;
    }
};


function victory(){
    //pasapalabraOK = true; //--> NO LO USO
    var messageVictory = `¡Felicitaciones, ${user.name}! Has respondido todas las preguntas que tenía para ti.\n
    Tu puntuación:
    Aciertos: ¡${user.rigths} aciertos!
    Errores: ${user.wrongs} errores.\n
    Veamos en qué posición del ranking te encuentras...`
    alert(messageVictory);
    scoring()
}

function scoring(){ //Muestra y ordena el ranking, y permite empezar una nueva partida.
    var mensajeRanking1 = 'RANKING DE POSICIONES';
    ranking.push({name: user.name, aciertos: user.rigths, errores: user.wrongs, rondas: user.ronda});
    ranking.sort((a,b) => (a.aciertos < b.aciertos) ? 1 : ((b.aciertos < a.aciertos) ? -1 : 0));
    mensajeRanking2 = []
    for (var i = 0; i < ranking.length; i++){
        mensajeRanking2.push(`${i+1}. ${ranking[i].name}: ${ranking[i].aciertos} puntos y ${ranking[i].errores} errores en ${ranking[i].rondas} rondas.`);
    };
    alert(`${mensajeRanking1}\n\n${mensajeRanking2.join('\n')}`);
    continuar = confirm('Presiona OK para jugar nuevamente, o ESC para salir:');
    switch(continuar){
        case true:
            welcome();
            break;
        case false:
            alert(`¡Adiós, ${user.name}!\n¡Vuelve cuando quieras volver a jugar PASAPALABRA!`);
            break;
    }
}

welcome()