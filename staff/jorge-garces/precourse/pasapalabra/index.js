var q1 = [
  {
    letter: 'a',
    answer: 'abducir',
    status: 0,
    question:
      'CON LA A. Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien'
  },
  {
    letter: 'b',
    answer: 'bingo',
    status: 0,
    question:
      "CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso"
  },
  {
    letter: 'c',
    answer: 'churumbel',
    status: 0,
    question: 'CON LA C. Niño, crío, bebé'
  },
  {
    letter: 'd',
    answer: 'diarrea',
    status: 0,
    question:
      'CON LA D. Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida'
  },
  {
    letter: 'e',
    answer: 'ectoplasma',
    status: 0,
    question:
      'CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación'
  },
  {
    letter: 'f',
    answer: 'facil',
    status: 0,
    question: 'CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad'
  },
  {
    letter: 'g',
    answer: 'galaxia',
    status: 0,
    question:
      'CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas'
  },
  {
    letter: 'h',
    answer: 'harakiri',
    status: 0,
    question: 'CON LA H. Suicidio ritual japonés por desentrañamiento'
  },
  {
    letter: 'i',
    answer: 'iglesia',
    status: 0,
    question: 'CON LA I. Templo cristiano'
  },
  {
    letter: 'j',
    answer: 'jabali',
    status: 0,
    question:
      "CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba"
  },
  {
    letter: 'k',
    answer: 'kamikaze',
    status: 0,
    question:
      'CON LA K. Persona que se juega la vida realizando una acción temeraria'
  },
  {
    letter: 'l',
    answer: 'licantropo',
    status: 0,
    question: 'CON LA L. Hombre lobo'
  },
  {
    letter: 'm',
    answer: 'misantropo',
    status: 0,
    question:
      'CON LA M. Persona que huye del trato con otras personas o siente gran aversión hacia ellas'
  },
  {
    letter: 'n',
    answer: 'necedad',
    status: 0,
    question: 'CON LA N. Demostración de poca inteligencia'
  },
  {
    letter: 'ñ',
    answer: 'señal',
    status: 0,
    question:
      'CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo.'
  },
  {
    letter: 'o',
    answer: 'orco',
    status: 0,
    question:
      'CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien'
  },
  {
    letter: 'p',
    answer: 'protoss',
    status: 0,
    question:
      'CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft'
  },
  {
    letter: 'q',
    answer: 'queso',
    status: 0,
    question:
      'CON LA Q. Producto obtenido por la maduración de la cuajada de la leche'
  },
  { letter: 'r', answer: 'raton', status: 0, question: 'CON LA R. Roedor' },
  {
    letter: 's',
    answer: 'stackoverflow',
    status: 0,
    question: 'CON LA S.Comunidad salvadora de todo desarrollador informático'
  },
  {
    letter: 't',
    answer: 'terminator',
    status: 0,
    question:
      'CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984'
  },
  {
    letter: 'u',
    answer: 'unamuno',
    status: 0,
    question:
      "CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914"
  },
  {
    letter: 'v',
    answer: 'vikingos',
    status: 0,
    question:
      'CON LA V. Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa'
  },
  {
    letter: 'w',
    answer: 'sandwich',
    status: 0,
    question:
      'CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso'
  },
  {
    letter: 'x',
    answer: 'botox',
    status: 0,
    question: 'CONTIENE LA X. Toxina bacteriana utilizada en cirujía estética'
  },
  {
    letter: 'y',
    answer: 'peyote',
    status: 0,
    question:
      'CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos'
  },
  {
    letter: 'z',
    answer: 'zen',
    status: 0,
    question:
      'CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional'
  }
];

var q2 = [
  {
    letter: 'a',
    answer: 'abrir',
    status: 0,
    question: 'CON LA A. Lo que no es cerrar'
  },
  {
    letter: 'b',
    answer: 'barco',
    status: 0,
    question: 'CON LA B. Medio de transporte acuático. Masculino'
  },
  {
    letter: 'c',
    answer: 'caspa',
    status: 0,
    question: 'CON LA C. Se deposita en los hombros si no usas H&S'
  },
  {
    letter: 'd',
    answer: 'diario',
    status: 0,
    question: 'CON LA D. Librito donde las adolescentes escriben sus peripecias'
  },
  { letter: 'e', answer: 'eden', status: 0, question: 'CON LA E. Paraiso' },
  {
    letter: 'f',
    answer: 'fuego',
    status: 0,
    question: 'CON LA F. Por el humo se sabe dónde está'
  },
  {
    letter: 'g',
    answer: 'galleta',
    status: 0,
    question: 'CON LA G. Se unta en la leche y se da en la cara'
  },
  {
    letter: 'h',
    answer: 'habano',
    status: 0,
    question: 'CON LA H. El mejor puro del mundo'
  },
  {
    letter: 'i',
    answer: 'ingles',
    status: 0,
    question: 'CON LA I. El idioma de Shakespeare'
  },
  {
    letter: 'j',
    answer: 'jorge',
    status: 0,
    question:
      'CON LA J. Así se llama el developer in the making que ha escrito estas preguntas'
  },
  { letter: 'k', answer: 'kilo', status: 0, question: 'CON LA K. Mil gramos' },
  { letter: 'l', answer: 'lobo', status: 0, question: 'CON LA L. Auuuuuuuu' },
  {
    letter: 'm',
    answer: 'mudo',
    status: 0,
    question: 'CON LA M. Persona que no puede hablar'
  },
  {
    letter: 'n',
    answer: 'nariz',
    status: 0,
    question: 'CON LA N. Órgano que hace uso del olfato'
  },
  {
    letter: 'ñ',
    answer: 'sueño',
    status: 0,
    question: 'CONTIENE LA Ñ. Se tiene cuando se duerme'
  },
  {
    letter: 'o',
    answer: 'oro',
    status: 0,
    question: 'CON LA O. Metal precioso amarillento'
  },
  {
    letter: 'p',
    answer: 'publico',
    status: 0,
    question: 'CON LA P. Lo contrario a privado'
  },
  {
    letter: 'q',
    answer: 'quemar',
    status: 0,
    question: 'CON LA Q. Prender fuego'
  },
  {
    letter: 'r',
    answer: 'renta',
    status: 0,
    question: 'CON LA R. Se declara a Hacienda'
  },
  {
    letter: 's',
    answer: 'superman',
    status: 0,
    question: 'CON LA S. Clark Kent sin gafas'
  },
  {
    letter: 't',
    answer: 'telefono',
    status: 0,
    question: 'CON LA T. Aparato para hacer llamadas y fotos'
  },
  {
    letter: 'u',
    answer: 'util',
    status: 0,
    question: 'CON LA U. Opuesto a inútil'
  },
  {
    letter: 'v',
    answer: 'valiente',
    status: 0,
    question: 'CON LA V. Persona gallarda y sin miedo'
  },
  {
    letter: 'w',
    answer: 'kawasaki',
    status: 0,
    question: 'CONTIENE LA W. Fabricante japonés de vehículos a motor'
  },
  {
    letter: 'x',
    answer: 'taxi',
    status: 0,
    question:
      'CONTIENE LA X. Automóvil de servicio público para el transporte de personas'
  },
  {
    letter: 'y',
    answer: 'cayena',
    status: 0,
    question: 'CONTIENE LA Y. Pimiento pequeño muy picante'
  },
  {
    letter: 'z',
    answer: 'zaragoza',
    status: 0,
    question: 'CON LA Z. Ciudad inmortal'
  }
];

var q3 = [
  {
    letter: 'a',
    answer: 'amen',
    status: 0,
    question:
      'CON LA A. Palabra usada por los cristianos al terminar sus oraciones'
  },
  {
    letter: 'b',
    answer: 'berrido',
    status: 0,
    question: 'CON LA B. Grito, alarido'
  },
  {
    letter: 'c',
    answer: 'casa',
    status: 0,
    question: 'CON LA C. Construcción usada a modo de vivienda'
  },
  {
    letter: 'd',
    answer: 'dardo',
    status: 0,
    question:
      'CON LA D. Proyectil de punta afilada y que requiere precisión en el lanzamiento'
  },
  {
    letter: 'e',
    answer: 'elenco',
    status: 0,
    question: 'CON LA E. Conjunto de actores que forman una compañia'
  },
  {
    letter: 'f',
    answer: 'felicidad',
    status: 0,
    question: 'CON LA F. Estado emocional placentero'
  },
  {
    letter: 'g',
    answer: 'gol',
    status: 0,
    question: 'CON LA G. Un punto en el fútbol'
  },
  {
    letter: 'h',
    answer: 'hora',
    status: 0,
    question: 'CON LA H. Sesenta minutos'
  },
  {
    letter: 'i',
    answer: 'idiota',
    status: 0,
    question: 'CON LA I. Bruto, poco inteligente, imbécil.'
  },
  {
    letter: 'j',
    answer: 'jamon',
    status: 0,
    question: 'CON LA J. Pata de cerdo curada'
  },
  {
    letter: 'k',
    answer: 'kas',
    status: 0,
    question: 'CON LA K. Marca de bebidas refrescantes de estractos'
  },
  {
    letter: 'l',
    answer: 'lento',
    status: 0,
    question: 'CON LA L. No es rápido'
  },
  {
    letter: 'm',
    answer: 'maria',
    status: 0,
    question: 'CON LA M. La Virgen Santísima'
  },
  {
    letter: 'n',
    answer: 'notable',
    status: 0,
    question: 'CON LA N. Entre bien y sobresaliente'
  },
  {
    letter: 'ñ',
    answer: 'caña',
    status: 0,
    question: 'CONTIENE LA Ñ. Vaso de cerveza, palo frágil'
  },
  {
    letter: 'o',
    answer: 'ortopedia',
    status: 0,
    question:
      'CON LA O. Tienda en la que se venden prótesis y elementos que ayudan a las personas con discapacidades físicas'
  },
  { letter: 'p', answer: 'pato', status: 0, question: 'CON LA P. Cuak Cuak!' },
  {
    letter: 'q',
    answer: 'quiebra',
    status: 0,
    question: 'CON LA Q. Bancarrota económica'
  },
  {
    letter: 'r',
    answer: 'romano',
    status: 0,
    question: 'CON LA R. Ciudadano de Roma'
  },
  {
    letter: 's',
    answer: 'sandalia',
    status: 0,
    question: 'CON LA S. Zapato abierto para el buen tiempo'
  },
  {
    letter: 't',
    answer: 'tarde',
    status: 0,
    question: 'CON LA T. Entre la mañana y la noche'
  },
  {
    letter: 'u',
    answer: 'ufo',
    status: 0,
    question: 'CON LA U. En ingles: onvi'
  },
  {
    letter: 'v',
    answer: 'valencia',
    status: 0,
    question: 'CON LA V. Las mejores paellas se hacen en ...'
  },
  {
    letter: 'w',
    answer: 'sandwich',
    status: 0,
    question:
      'CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso'
  },
  {
    letter: 'x',
    answer: 'xilofono',
    status: 0,
    question: 'CONTIENE LA X. Instrumento musical'
  },
  {
    letter: 'y',
    answer: 'yeso',
    status: 0,
    question:
      'CON LA Y. Polvo blanco que mezclado con agua se usa en albañilería'
  },
  {
    letter: 'z',
    answer: 'zorro',
    status: 0,
    question: 'CON LA Z. Espadachín mexicano con gorro y antifaz'
  }
];

var questionList = [q1, q2, q3];
var questions = [];

// elegir una pregunta de cada index, de cada array y guardarla en questions

var users = [
  // Array de objetos con usuarios y sus puntuaciones
  {
    name: 'Andreea',
    points: 14
  },
  {
    name: 'Tommy',
    points: 10
  },
  {
    name: 'Rodrigo',
    points: 6
  }
];

function pasapalabra() {
  // Generamos un array de preguntas aleatorias

  for (var i = 0; i < q1.length; i++) {
    questions.push(questionList[Math.floor(Math.random() * 3)][i]);
  }

  let user;
  let current = 0;
  let correctAnswers = 0;
  let wrongAnswers = 0;

  welcome();

  function welcome() {
    console.log(`Welcome to Skylab's Pasapalabra!`);
    console.log(`Enter your name and press OK to Continue, Cancel to exit`);

    user = prompt('Please enter your name');

    if (user == null) {
      console.clear();
      console.log('Have a nice day!');
    } else if (user == '') {
      console.clear();
      welcome();
    } else {
      check();
    }
  }

  // Comprueba el status de todas las respuestas devolviendo 0 cuando están todas contestadas.

  // status 0: unanswered
  // status 1: right
  // status 2: wrong
  // status 3: pasapalabra

  function checkStatus() {
    testStatus = 0;

    questions.forEach(function(num) {
      if (num.status != 1 && num.status != 2) {
        testStatus++;
      }
    });

    // for (var i = 0; i < questions.length; i++) {
    //   if (questions[i].status != 1 && questions[i].status !=2) {
    //     testStatus++
    //   }
    // }
  }

  function check() {
    checkStatus();
    if (testStatus > 0) {
      question();
    } else {
      exit();
    }
  }

  function question() {
    var currentAnswer;
    console.clear();

    // Comprueba si la pregunta está sin contestar o en pasapalabra y en caso afirmativo la formula

    if (questions[current].status == 0 || questions[current].status == 3) {
      console.log(questions[current].question);
      currentAnswer = prompt(questions[current].question);
      questionContinue();
    } else {
      current++;
      check();
    }

    function questionContinue() {
      // Respuestas inválidas o END

      if (currentAnswer == null || currentAnswer.toLowerCase() == 'end') {
        exit();
      } else if (currentAnswer == '') {
        alert('Please enter your answer');
        check();

        // Respuesta pasapalabra, cambia status a 3
      } else if (currentAnswer.toLowerCase() == 'pasapalabra') {
        console.log(`You will get it right!`);
        alert('Pasapalabra!');
        if (questions[current].status != 3) {
          // segundas pasadas
          questions[current].status = 3;
          current++;
        }
        if (current < questions.length) {
          check();
        } else {
          current = 0;
          check();
        }

        // Respuesta correcta, cambia status a 1
      } else if (currentAnswer.toLowerCase() == questions[current].answer) {
        console.log('Nice!');
        window.confirm('CORRECT!!');
        correctAnswers++;
        questions[current].status = 1;
        current++;
        if (current < questions.length) {
          check();
        } else {
          current = 0;
          check();
        }

        // Respuesta incorrecta, cambia status a 2
      } else if (currentAnswer.toLowerCase() != questions[current].answer) {
        console.log(`That wasn't quite right ...`);
        alert(`INCORRECT!`);
        wrongAnswers++;
        questions[current].status = 2;
        current++;
        if (current < questions.length) {
          check();
        } else {
          current = 0;
          check();
        }
      }
    } // end questionContinue
  } // end question()

  function exit() {
    console.clear();
    console.log(`Have a nice day, ` + user + '!');
    checkStatus();
    if (testStatus > 0) {
      console.log('You got ' + correctAnswers + ' answer(s) right.');
    } else {
      console.clear();
      console.log(
        'Great Game, ' +
          user +
          '! You got ' +
          correctAnswers +
          ' answer(s) right and ' +
          wrongAnswers +
          ' wrong.'
      );
    }

    users.push({ name: user, points: correctAnswers });
    scores();
  }

  //users.push({name: user, points: correctAnswers})
  //scores();

  function scores() {
    // Ordenmos el array de usuarios por puntos descendentes
    users.sort(function(a, b) {
      return b.points - a.points;
    });

    // Presentamos
    console.log('--------------------------');
    console.log('Pasapalabra Hall of Fame');
    console.log('--------------------------');

    for (var i = 0; i < users.length; i++) {
      console.log(
        'Rank ' +
          users.indexOf(users[i]) +
          ': ' +
          users[i].name +
          ' with ' +
          users[i].points +
          ' points.'
      );
    }
  }
}

pasapalabra();
